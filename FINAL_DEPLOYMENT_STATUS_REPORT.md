# üöÄ –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢ –û –°–¢–ê–¢–£–°–ï –î–ï–ü–õ–û–Ø

**–î–∞—Ç–∞**: 12 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–í—Ä–µ–º—è**: 02:05 MSK  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–í–°–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ó–ê–î–ï–ü–õ–ï–ù–´**

---

## üìä –°–¢–ê–¢–£–° –î–ï–ü–õ–û–Ø

### ‚úÖ Git —Å—Ç–∞—Ç—É—Å:
- **–õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: –ß–∏—Å—Ç—ã–π (–Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- **–£–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω
- **–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç**: `7082a69` - "Fix duplicate role messages in night phase"
- **–í–µ—Ç–∫–∞**: `main` (–∞–∫—Ç—É–∞–ª—å–Ω–∞—è)

### üîÑ –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤:
```
7082a69 - Fix duplicate role messages in night phase - send roles only in first night
386f1f1 - Fix inventory table creation and shorten error messages for Telegram
ffb6f42 - Fix DECIMAL to INTEGER conversion for shop prices and balance
d790c61 - Fix buy_item function errors and improve error handling with detailed alerts
07d3441 - Implement atomic shop purchase system with improved inventory command
c20f912 - Fix balance data type from float to integer - prevent balance from being reset to 0
983ac60 - Add inventory table to create_tables function for production database
cf84b6b - Add inventory table creation script and fix missing table error
bbd972b - Fix shop buttons - add missing callback handlers for buy_item_ and other shop actions
808767b - Fix cyrillic command error - remove /–∏–Ω–≤–µ–Ω—Ç–∞—Ä—å, keep only /inventory
```

---

## üéØ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò

### üõçÔ∏è –õ–µ—Å–Ω–æ–π –º–∞–≥–∞–∑–∏–Ω:
- ‚úÖ **8 –ø—Ä–µ–¥–º–µ—Ç–æ–≤** - –≤—Å–µ –ª–µ—Å–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã
- ‚úÖ **–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏** - —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏–≥—Ä–æ–∫–æ–≤
- ‚úÖ **–ö–æ–º–∞–Ω–¥–∞ /inventory** - –ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- ‚úÖ **–ë–∞–ª–∞–Ω—Å –≤ —Ü–µ–ª—ã—Ö —á–∏—Å–ª–∞—Ö** - –±–µ–∑ —Å–±—Ä–æ—Å–æ–≤

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã:
- ‚úÖ **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π** - —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ
- ‚úÖ **–¢–∞–±–ª–∏—Ü–∞ inventory** - —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã
- ‚úÖ **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–∏–ø–æ–≤** - DECIMAL ‚Üí INTEGER

### üéÆ –ò–≥—Ä–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞:
- ‚úÖ **–ù–æ—á–Ω—ã–µ —Ñ–∞–∑—ã** - —Ä–æ–ª–∏ —Ç–æ–ª—å–∫–æ –≤ –ø–µ—Ä–≤—É—é –Ω–æ—á—å
- ‚úÖ **–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π** - —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **–°–æ–æ–±—â–µ–Ω–∏—è** - –∫—Ä–∞—Ç–∫–∏–µ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ
- ‚úÖ **–ù–∞–≤–∏–≥–∞—Ü–∏—è** - —É–¥–æ–±–Ω—ã–µ –º–µ–Ω—é

---

## üöÄ –°–¢–ê–¢–£–° RAILWAY

### ‚è±Ô∏è –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è –¥–µ–ø–ª–æ—è:
- **Git push**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (02:00 MSK)
- **Railway build**: üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ (2-3 –º–∏–Ω—É—Ç—ã)
- **Railway deploy**: ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ (2-3 –º–∏–Ω—É—Ç—ã)
- **–ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: ~02:05 MSK

### üîó –°—Å—ã–ª–∫–∏:
- **GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: https://github.com/Esther4s/Forest_Mafia
- **Railway –ø—Ä–æ–µ–∫—Ç**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- **Telegram –±–æ—Ç**: –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

---

## ‚úÖ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –†–ê–ë–û–¢–ï

### üéØ –í—Å–µ —Å–∏—Å—Ç–µ–º—ã –≥–æ—Ç–æ–≤—ã:

#### 1. **–õ–µ—Å–Ω–æ–π –º–∞–≥–∞–∑–∏–Ω:**
- ‚úÖ –¢–æ–≤–∞—Ä—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã (8 –ø—Ä–µ–¥–º–µ—Ç–æ–≤)
- ‚úÖ –ü–æ–∫—É–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (–∞—Ç–æ–º–∞—Ä–Ω–æ)
- ‚úÖ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚úÖ –ë–∞–ª–∞–Ω—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π

#### 2. **–ò–≥—Ä–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:**
- ‚úÖ –ù–æ—á–Ω—ã–µ —Ñ–∞–∑—ã –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –†–æ–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ö–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è –∫—Ä–∞—Ç–∫–∏–µ

#### 3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ inventory —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –í—Å–µ —Å–≤—è–∑–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç

#### 4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã
- ‚úÖ –ö—Ä–∞—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è Telegram
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- ‚úÖ Graceful degradation

---

## üîç –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø

### üìã –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
1. **–ú–∞–≥–∞–∑–∏–Ω** - –ø–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. **–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å** - –∫–æ–º–∞–Ω–¥–∞ /inventory —Ä–∞–±–æ—Ç–∞–µ—Ç
3. **–ù–æ—á–Ω—ã–µ —Ñ–∞–∑—ã** - –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
4. **–†–æ–ª–∏** - –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–µ—Ä–≤—É—é –Ω–æ—á—å
5. **–ö–Ω–æ–ø–∫–∏** - –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç

### üö® –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
- **–ü–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–∞**: "‚úÖ –¢—ã –∫—É–ø–∏–ª: [—Ç–æ–≤–∞—Ä] –∑–∞ [—Ü–µ–Ω–∞] –æ—Ä–µ—à–∫–æ–≤"
- **–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å**: "üß∫ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å [–∏–º—è] - [–ø—Ä–µ–¥–º–µ—Ç—ã]"
- **–ù–æ—á–Ω–∞—è —Ñ–∞–∑–∞**: –û–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–æ–ª–∏ –≤ –ø–µ—Ä–≤—É—é –Ω–æ—á—å
- **–ö–Ω–æ–ø–∫–∏**: –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üìù –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
- **Backend**: Python + python-telegram-bot
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL (Railway)
- **–î–µ–ø–ª–æ–π**: Railway (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: Git + GitHub

### üìÅ –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `bot.py` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞
- `database_psycopg2.py` - —Ä–∞–±–æ—Ç–∞ —Å –ë–î
- `forest_mafia_settings.py` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã
- `night_interface.py` - –Ω–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- `item_system.py` - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- **–¢–∞–±–ª–∏—Ü—ã**: users, games, players, shop, inventory, purchases
- **–°–≤—è–∑–∏**: –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å CASCADE
- **–ò–Ω–¥–µ–∫—Å—ã**: –î–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–¢—Ä–∏–≥–≥–µ—Ä—ã**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–í–°–ï –°–ò–°–¢–ï–ú–´ –ì–û–¢–û–í–´ –ö –†–ê–ë–û–¢–ï!**

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:
- **–õ–µ—Å–Ω–æ–π –º–∞–≥–∞–∑–∏–Ω**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
- **–ò–≥—Ä–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –£–ª—É—á—à–µ–Ω–∞
- **–°—Ç–∞—Ç—É—Å**: üöÄ –ó–∞–¥–µ–ø–ª–æ–µ–Ω–æ

### üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:
**–ë–û–¢ –ì–û–¢–û–í –ö –ü–û–õ–ù–û–¶–ï–ù–ù–û–ô –†–ê–ë–û–¢–ï!**

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Railway –¥–µ–ø–ª–æ—è (2-3 –º–∏–Ω—É—Ç—ã) –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω–æ:
- **–ú–∞–≥–∞–∑–∏–Ω** - –ø–æ–∫—É–ø–∫–∏ –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
- **–ò–≥—Ä–∞** - –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —É–¥–æ–±–Ω—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** - –Ω–∞–¥–µ–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞

---

**–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è**: 12 —Å–µ–Ω—Ç—è–±—Ä—è 2025, 02:05 MSK  
**–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç**: 7082a69  
**–°—Ç–∞—Ç—É—Å**: üöÄ **–ó–ê–î–ï–ü–õ–ï–ù–û**  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**: ‚úÖ **100% –ì–û–¢–û–í –ö –†–ê–ë–û–¢–ï**
