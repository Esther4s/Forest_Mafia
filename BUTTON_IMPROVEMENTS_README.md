# üîÑ –£–ª—É—á—à–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–£–¥–∞–ª–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫–Ω–æ–ø–∫–∏ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –¥–Ω—è.

## ‚ùå –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ "–ö—Ç–æ –≤–æ–ª–∫?"**
- **–£–¥–∞–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞**: "üê∫ –í—ã–±—Ä–∞—Ç—å –≤–æ–ª–∫–∞" –∏–∑ –¥–Ω–µ–≤–Ω–æ–π —Ñ–∞–∑—ã
- **–£–¥–∞–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏**:
  - `start_wolf_voting_phase()` - –∏–Ω–∏—Ü–∏–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ –≤–æ–ª–∫–∞
  - `wolf_voting_timer()` - —Ç–∞–π–º–µ—Ä –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ –≤–æ–ª–∫–∞
  - `process_wolf_voting_results()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
  - `handle_wolf_voting()` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–æ–∫ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
  - `complete_wolf_voting_early()` - –¥–æ—Å—Ä–æ—á–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
- **–£–¥–∞–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫**: `CallbackQueryHandler(self.handle_wolf_voting, pattern=r"^wolf_vote_")`

### 2. **–ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ç–∞–ø"**
- **–£–¥–∞–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞**: "üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ç–∞–ø" –∏–∑ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- **–£–¥–∞–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏**:
  - `check_stage_from_callback()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —ç—Ç–∞–ø–∞ –∏–≥—Ä—ã
  - `handle_check_stage()` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —ç—Ç–∞–ø–∞
- **–£–¥–∞–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫**: `CallbackQueryHandler(self.handle_check_stage, pattern=r"^check_stage$")`
- **–£–¥–∞–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ –∏–∑**:
  - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫–æ–≤
  - –ö–æ–º–∞–Ω–¥—ã `/status`
  - –†–∞–∑–ª–∏—á–Ω—ã—Ö –∏–≥—Ä–æ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

## ‚úÖ –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### **–ö–Ω–æ–ø–∫–∞ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–Ω—è" –≤ `/status`**

#### **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**:
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∫–æ–º–∞–Ω–¥—É `/status` **—Ç–æ–ª—å–∫–æ** –≤–æ –≤—Ä–µ–º—è –¥–Ω–µ–≤–Ω–æ–π —Ñ–∞–∑—ã –∏–≥—Ä—ã

#### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- **–ö–Ω–æ–ø–∫–∞**: "üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–Ω—è"
- **Callback data**: `repeat_day_message`
- **–î–æ—Å—Ç—É–ø**: –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∏–≥—Ä—ã (–Ω–µ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã)
- **–£—Å–ª–æ–≤–∏—è**: –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –¥–Ω–µ–≤–Ω–æ–π —Ñ–∞–∑–µ (`GamePhase.DAY`)

#### **–î–µ–π—Å—Ç–≤–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—É—á–∞—Å—Ç–Ω–∏–∫ –∏–≥—Ä—ã)
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∏–≥—Ä–∞ –≤ –¥–Ω–µ–≤–Ω–æ–π —Ñ–∞–∑–µ
3. –ü–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–Ω–µ–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ "üîÑ –°–æ–æ–±—â–µ–Ω–∏–µ –¥–Ω—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!"

## üéÆ –ù–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥—ã `/status`

### **–í –¥–Ω–µ–≤–Ω–æ–π —Ñ–∞–∑–µ**:
```
üìä –°—Ç–∞—Ç—É—Å: ‚òÄÔ∏è –î–µ–Ω—å

üîÑ –†–∞—É–Ω–¥: 2
üë• –ñ–∏–≤—ã—Ö: 5

–ñ–∏–≤—ã–µ –∏–≥—Ä–æ–∫–∏:
‚Ä¢ @player1
‚Ä¢ @player2
‚Ä¢ @player3
‚Ä¢ @player4
‚Ä¢ @player5

[üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–Ω—è]
```

### **–í –¥—Ä—É–≥–∏—Ö —Ñ–∞–∑–∞—Ö**:
```
üìä –°—Ç–∞—Ç—É—Å: üåô –ù–æ—á—å / üó≥Ô∏è –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ / üèÅ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞

üîÑ –†–∞—É–Ω–¥: 2
üë• –ñ–∏–≤—ã—Ö: 5

–ñ–∏–≤—ã–µ –∏–≥—Ä–æ–∫–∏:
‚Ä¢ @player1
‚Ä¢ @player2
‚Ä¢ @player3
‚Ä¢ @player4
‚Ä¢ @player5

(–±–µ–∑ –∫–Ω–æ–ø–æ–∫)
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### **–ü–æ–≤—Ç–æ—Ä—è–µ–º–æ–µ –¥–Ω–µ–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**:
```
‚òÄÔ∏è –ù–∞—Å—Ç—É–ø–∏–ª–æ —É—Ç—Ä–æ ‚òÄÔ∏è

üå≤ –í—Å–µ –∑–≤–µ—Ä—É—à–∫–∏ –ø—Ä–æ—Å–Ω—É–ª–∏—Å—å –∏ —Å–æ–±—Ä–∞–ª–∏—Å—å –Ω–∞ –ª–µ—Å–Ω–æ–π –ø–æ–ª—è–Ω–µ –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è.
üîÑ –†–∞—É–Ω–¥: 2
üë• –ñ–∏–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤: 5

üí¨ –û–±—Å—É–∂–¥–∞–π—Ç–µ, –∫–æ–≥–æ –ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ—Ç–µ –≤ —Ö–∏—â–Ω–∏—á–µ—Å—Ç–≤–µ!
üïê –£ –≤–∞—Å –µ—Å—Ç—å –≤—Ä–µ–º—è –¥–ª—è —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π...

[üèÅ –ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ]  [üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–∞–π–º–µ—Ä–∞]
```

### **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ –∫–æ–¥–µ**:
- **–§—É–Ω–∫—Ü–∏—è**: `handle_day_actions()` –≤ —Ñ–∞–π–ª–µ `bot.py`
- **Callback pattern**: –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ `day_` pattern
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤**: `check_user_permissions(update, context, "member")`

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### **1. –£–ø—Ä–æ—â–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**
- –£–±—Ä–∞–Ω—ã —Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–Ω–æ–ø–∫–∏
- –ú–µ–Ω—å—à–µ –ø—É—Ç–∞–Ω–∏—Ü—ã –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤
- –ß–∏—â–µ –≤—ã–≥–ª—è–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### **2. –£–ª—É—á—à–µ–Ω–∏–µ UX**
- –ö–Ω–æ–ø–∫–∞ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–Ω—è" —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –∑–∞–≤–∏—Å—à–∏—Ö –¥–Ω–µ–π
- –î–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º, –Ω–µ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ (–≤ –¥–Ω–µ–≤–Ω–æ–π —Ñ–∞–∑–µ)

### **3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞**
- –£–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥ (~200 —Å—Ç—Ä–æ–∫)
- –£–±—Ä–∞–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- –ë–æ–ª–µ–µ —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ó–∞–≤–∏—Å—à–∏–π –¥–µ–Ω—å**
1. –ò–≥—Ä–æ–∫ –∑–∞–º–µ—á–∞–µ—Ç, —á—Ç–æ –¥–Ω–µ–≤–Ω–æ–µ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ "–∑–∞–≤–∏—Å–ª–æ"
2. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `/status` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
3. –í–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É "üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–Ω—è"
4. –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É - –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–µ–∂–µ–µ –¥–Ω–µ–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏

### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏**
1. –î–Ω–µ–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "–ø–æ—Ç–µ—Ä—è–ª–æ—Å—å" –≤ —á–∞—Ç–µ
2. –õ—é–±–æ–π —É—á–∞—Å—Ç–Ω–∏–∫ –º–æ–∂–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ `/status`
3. –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### **–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞**
1. –ò–≥—Ä–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `/status` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–≥—Ä—ã
2. –í –¥–Ω–µ–≤–Ω–æ–π —Ñ–∞–∑–µ –≤–∏–¥–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É
3. –í –¥—Ä—É–≥–∏—Ö —Ñ–∞–∑–∞—Ö –∫–Ω–æ–ø–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–Ω–µ –º–µ—à–∞–µ—Ç)

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç–∞–ª —á–∏—â–µ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–µ–µ!
