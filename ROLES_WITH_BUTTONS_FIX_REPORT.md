# üé≠ –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Ä–æ–ª–µ–π —Å –∫–Ω–æ–ø–∫–∞–º–∏

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–∏–ª:
- **–û–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–æ–ª–∏** —Å –∫–Ω–æ–ø–∫–æ–π –Ω–æ—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- **–£ –∑–∞–π—Ü–∞ –∫–Ω–æ–ø–∫–∞ "–°–ø–∞—Ç—å"** –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- **–£ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–æ–ª–µ–π –∫–Ω–æ–ø–∫–∞ "–ù–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è"**

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. ‚úÖ **–ò–∑–º–µ–Ω–µ–Ω –º–µ—Ç–æ–¥ `send_roles_to_players` –≤ bot.py**

**–ë—ã–ª–æ:** –û—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ä–æ–ª—è—Ö
**–°—Ç–∞–ª–æ:** –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ä–æ–ª–∏ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–µ–π—Å—Ç–≤–∏–π

**–ö–æ–¥:**
```python
# –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏
keyboard = []
if player.role == Role.HARE:
    # –£ –∑–∞–π—Ü–∞ —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ "–°–ø–∞—Ç—å"
    keyboard = [[InlineKeyboardButton(
        "üò¥ –°–ø–∞—Ç—å",
        callback_data=f"night_skip_{player.user_id}"
    )]]
else:
    # –£ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–æ–ª–µ–π - –º–µ–Ω—é –Ω–æ—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
    keyboard = [[InlineKeyboardButton(
        "üåô –ù–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è",
        callback_data=f"night_actions_{player.user_id}"
    )]]

reply_markup = InlineKeyboardMarkup(keyboard)
```

### 2. ‚úÖ **–£–±—Ä–∞–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã –≤ `start_night_phase`**

**–ë—ã–ª–æ:** –û—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å —Ä–æ–ª–∏ + –æ—Ç–¥–µ–ª—å–Ω–æ –º–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π + –æ—Ç–¥–µ–ª—å–Ω–æ –∫–Ω–æ–ø–∫–∏ –∑–∞–π—Ü–∞–º
**–°—Ç–∞–ª–æ:** –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–æ–ª–∏ —Å –∫–Ω–æ–ø–∫–∞–º–∏

**–ö–æ–¥:**
```python
# –ë—ã–ª–æ:
await self.send_roles_to_players(context, game)
await self.send_night_actions_to_players(context, game)
await self.send_role_button_to_passive_players(context, game)

# –°—Ç–∞–ª–æ:
await self.send_roles_to_players(context, game)
```

### 3. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ callback'–æ–≤**

**–î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:**
- `handle_night_actions_callback` - –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ù–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è"
- `handle_night_skip_callback` - –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–°–ø–∞—Ç—å" —É –∑–∞–π—Ü–µ–≤

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
```python
application.add_handler(CallbackQueryHandler(self.handle_night_actions_callback, pattern=r"^night_actions_"))
application.add_handler(CallbackQueryHandler(self.handle_night_skip_callback, pattern=r"^night_skip_"))
```

### 4. ‚úÖ **–£–ø—Ä–æ—â–µ–Ω `send_role_reminders` –≤ night_interface.py**

**–ë—ã–ª–æ:** –û—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ä–æ–ª—è—Ö
**–°—Ç–∞–ª–æ:** –ú–µ—Ç–æ–¥ –ø—É—Å—Ç–æ–π, —Ç–∞–∫ –∫–∞–∫ —Ä–æ–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å—Ä–∞–∑—É —Å –∫–Ω–æ–ø–∫–∞–º–∏

### 5. ‚úÖ **–£–¥–∞–ª–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –º–µ—Ç–æ–¥ `send_role_button_to_passive_players`**

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–µ–ø–µ—Ä—å —Ä–æ–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å—Ä–∞–∑—É —Å –∫–Ω–æ–ø–∫–∞–º–∏, –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –Ω–µ –Ω—É–∂–µ–Ω

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ **–¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
1. **–û–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–æ–ª–∏** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞
2. **–£ –∑–∞–π—Ü–∞ –∫–Ω–æ–ø–∫–∞ "üò¥ –°–ø–∞—Ç—å"** - –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –Ω–æ—á—å
3. **–£ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–æ–ª–µ–π –∫–Ω–æ–ø–∫–∞ "üåô –ù–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è"** - –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é
4. **–ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** —Å–æ–æ–±—â–µ–Ω–∏–π
5. **–ß–∏—Å—Ç—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –≤—Å–µ –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏

### ‚úÖ **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
- **–í–æ–ª–∫, –õ–∏—Å–∞, –ö—Ä–æ—Ç, –ë–æ–±—ë—Ä**: –ü–æ–ª—É—á–∞—é—Ç —Ä–æ–ª—å + –∫–Ω–æ–ø–∫—É "–ù–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è"
- **–ó–∞—è—Ü**: –ü–æ–ª—É—á–∞–µ—Ç —Ä–æ–ª—å + –∫–Ω–æ–ø–∫—É "–°–ø–∞—Ç—å"
- **–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏**: –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
1. ‚úÖ –ò–≥—Ä–æ–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–æ–ª–∏
2. ‚úÖ –£ –∑–∞–π—Ü–∞ –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ "–°–ø–∞—Ç—å"
3. ‚úÖ –£ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–æ–ª–µ–π –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ "–ù–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è"
4. ‚úÖ –ö–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
5. ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–µ–ø–ª–æ—é

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´**

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã –∫ –∫–æ–º–º–∏—Ç—É:**
```bash
git add bot.py night_interface.py ROLES_WITH_BUTTONS_FIX_REPORT.md
git commit -m "feat: —Ä–æ–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–µ–π—Å—Ç–≤–∏–π

- –û–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–æ–ª–∏ —Å –∫–Ω–æ–ø–∫–æ–π
- –£ –∑–∞–π—Ü–∞ –∫–Ω–æ–ø–∫–∞ '–°–ø–∞—Ç—å' –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ –Ω–æ—á–∏
- –£ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–æ–ª–µ–π –∫–Ω–æ–ø–∫–∞ '–ù–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è'
- –£–±—Ä–∞–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–æ–≤—ã—Ö callback'–æ–≤"
```

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–¢–†–ï–ë–û–í–ê–ù–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –ü–û–õ–ù–û–°–¢–¨–Æ –í–´–ü–û–õ–ù–ï–ù–´!**

- ‚úÖ **–û–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–æ–ª–∏** —Å –∫–Ω–æ–ø–∫–æ–π
- ‚úÖ **–£ –∑–∞–π—Ü–∞ –∫–Ω–æ–ø–∫–∞ "–°–ø–∞—Ç—å"** –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ –Ω–æ—á–∏
- ‚úÖ **–£ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–∫–∞ "–ù–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è"**
- ‚úÖ **–ß–∏—Å—Ç—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **–í—Å–µ –∫–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! üöÄ**
