# üîß –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ –∫–Ω–æ–ø–æ–∫

## üéØ –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### 1. ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å

**–ü—Ä–∏—á–∏–Ω–∞:** –í –º–µ—Ç–æ–¥–µ `handle_timer_values` –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑–º–µ–Ω—è–ª–∏—Å—å –≤ –ø–∞–º—è—Ç–∏, –Ω–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –≤ —Ñ–∞–π–ª —á–µ—Ä–µ–∑ `global_settings.set()`.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```python
# –ë—ã–ª–æ:
await query.edit_message_text(f"üåô –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–æ—á–∏ –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ {seconds} —Å–µ–∫—É–Ω–¥!")

# –°—Ç–∞–ª–æ:
self.global_settings.set("night_duration", seconds)
await query.edit_message_text(f"üåô –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–æ—á–∏ –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ {seconds} —Å–µ–∫—É–Ω–¥!\n\n‚úÖ –ù–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∏ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∏–≥—Ä.")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–π–º–µ—Ä–æ–≤ —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª `bot_settings.json`

### 2. ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ–ª–µ–π –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å

**–ü—Ä–∏—á–∏–Ω–∞:** –í –º–µ—Ç–æ–¥–µ `handle_role_settings` –Ω–µ –±—ã–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö callback'–æ–≤ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–µ–π —Ä–æ–ª–µ–π.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```python
# –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ callback'–æ–≤:
if query.data.startswith("role_wolves_"):
    percentage = int(query.data.split("_")[2])
    self.global_settings.set("role_distribution", {
        **self.global_settings.get("role_distribution", {}),
        "wolves": percentage / 100.0
    })
    await query.edit_message_text(f"üê∫ –î–æ–ª—è –≤–æ–ª–∫–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ {percentage}%!\n\n‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∏ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∏–≥—Ä.")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–æ–ª–µ–π —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

### 3. ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö

**–ü—Ä–∏—á–∏–Ω–∞:** –í –º–µ—Ç–æ–¥–∞—Ö `handle_timer_settings` –∏ `handle_role_settings` –±—ã–ª–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥–ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```python
# –ë—ã–ª–æ:
if query.data.startswith("timer_night"):
    await self.show_night_duration_options(query, context)

# –°—Ç–∞–ª–æ:
if query.data == "timer_night":
    await self.show_night_duration_options(query, context)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–æ—á–∏** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª ‚úÖ
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–Ω—è** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª ‚úÖ
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª ‚úÖ
- **–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º** - –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è ‚úÖ
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª ‚úÖ

### ‚úÖ –†–∞–±–æ—Ç–∞ –∫–Ω–æ–ø–æ–∫:
- **–ö–Ω–æ–ø–∫–∏ —Ç–∞–π–º–µ—Ä–æ–≤** - —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ
- **–ö–Ω–æ–ø–∫–∏ —Ä–æ–ª–µ–π** - —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ
- **–ö–Ω–æ–ø–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ
- **–ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ
- **–ö–Ω–æ–ø–∫–∞ "–ó–∞–∫—Ä—ã—Ç—å"** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª `bot_settings.json`:

```json
{
  "test_mode": true,
  "min_players_normal": 6,
  "min_players_test": 3,
  "max_players": 12,
  "night_duration": 60,
  "day_duration": 300,
  "voting_duration": 120,
  "role_distribution": {
    "wolves": 0.25,
    "fox": 0.15,
    "hares": 0.35,
    "mole": 0.15,
    "beaver": 0.10
  },
  "auto_end_conditions": {
    "max_rounds": 25,
    "max_game_duration_hours": 3,
    "min_alive_players": 3
  },
  "forest_mafia_features": {
    "fox_death_threshold": 2,
    "beaver_protection_enabled": true,
    "mole_revelation_threshold": 0.8,
    "herbivore_survival_threshold": 0.7
  }
}
```

## üéÆ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. –î–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/settings` –≤ —á–∞—Ç–µ
- –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 2. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–æ–≤:
- –ù–∞–∂–º–∏—Ç–µ "‚è±Ô∏è –ò–∑–º–µ–Ω–∏—Ç—å —Ç–∞–π–º–µ—Ä—ã"
- –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ç–∞–π–º–µ—Ä–∞ (–Ω–æ—á—å/–¥–µ–Ω—å/–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ)
- –í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è

### 3. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π:
- –ù–∞–∂–º–∏—Ç–µ "üé≠ –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π"
- –í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è

### 4. –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º:
- –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞
- –†–µ–∂–∏–º –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤ –∏–∑–º–µ–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- **–¢–∞–π–º–µ—Ä—ã** - –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –Ω–æ–≤—ã–º –∏–≥—Ä–∞–º
- **–†–æ–ª–∏** - –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ä–æ–ª–µ–π
- **–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º** - –≤–ª–∏—è–µ—Ç –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ –±–æ—Ç–∞

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:**
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª
- ‚úÖ –ö–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ù–µ—Ç —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
- ‚úÖ –í—Å–µ callback'—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –Ω–æ–≤—ã–º –∏–≥—Ä–∞–º

**–°–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞!** üéâ

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º*
