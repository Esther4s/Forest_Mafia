# üîß –ö–û–ú–ü–õ–ï–ö–°–ù–´–ô –û–¢–ß–Å–¢ –û–ë –ò–°–ü–†–ê–í–õ–ï–ù–ò–ò –°–ò–°–¢–ï–ú–´

## üìã –û–±–∑–æ—Ä

–ü—Ä–æ–≤–µ–¥–µ–Ω–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –Ω–æ—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ –∏–≥—Ä–µ "–õ–µ—Å –∏ –í–æ–ª–∫–∏". –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –≤–æ–ª–∫ –Ω–µ –º–æ–≥ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –Ω–æ—á—å, –ø–æ–ª—É—á–∞—è –æ—à–∏–±–∫—É –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ö–æ–¥".

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ:

1. **‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã —Å–Ω–æ–≤ –∑–∞–π—Ü–∞**
   - –°–∏—Å—Ç–µ–º–∞ —Å–Ω–æ–≤ –∑–∞–π—Ü–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - 110 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–Ω–æ–≤ —Å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º–∏ —Ç–µ–º–∞–º–∏
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

2. **‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã –Ω–æ—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π**
   - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
   - –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ `skip` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π
   - –ú–µ—Ç–æ–¥ `skip_action` –≤ `NightActions` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

3. **‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
   - Callback'–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–±–∏—Ä–∞—é—Ç—Å—è
   - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - NightActions –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–≥—Ä—ã

## üîß –í–Ω–µ—Å—ë–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π

**–§–∞–π–ª:** `callback_handler.py`

#### –í–æ–ª–∫ (`_handle_wolf_action`)
```python
# –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
self.logger.info(f"üîç _handle_wolf_action: –ü–æ–ª—É—á–µ–Ω callback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}, parts: {parts}")

# –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä–æ–∫–∞
if not player or player.role != Role.WOLF:
    self.logger.warning(f"‚ö†Ô∏è _handle_wolf_action: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_id} –Ω–µ –≤–æ–ª–∫ (—Ä–æ–ª—å: {player.role if player else 'None'})")
    await query.answer("‚ùå –í—ã –Ω–µ –≤–æ–ª–∫!", show_alert=True)
    return

# –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–∑—ã –∏–≥—Ä—ã
if game.phase != GamePhase.NIGHT:
    self.logger.warning(f"‚ö†Ô∏è _handle_wolf_action: –ù–µ –Ω–æ—á–Ω–∞—è —Ñ–∞–∑–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id} (—Ñ–∞–∑–∞: {game.phase})")
    await query.answer("‚ùå –°–µ–π—á–∞—Å –Ω–µ –Ω–æ—á–Ω–∞—è —Ñ–∞–∑–∞!", show_alert=True)
    return
```

#### –õ–∏—Å–∞ (`_handle_fox_action`)
```python
# –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –ª–∏—Å—ã
self.logger.info(f"üîç _handle_fox_action: –ü–æ–ª—É—á–µ–Ω callback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}, parts: {parts}")
# ... –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–∏ –∏ —Ñ–∞–∑—ã –∏–≥—Ä—ã
```

#### –ö—Ä–æ—Ç (`_handle_mole_action`)
```python
# –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –∫—Ä–æ—Ç–∞
self.logger.info(f"üîç _handle_mole_action: –ü–æ–ª—É—á–µ–Ω callback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}, parts: {parts}")
# ... –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–∏ –∏ —Ñ–∞–∑—ã –∏–≥—Ä—ã
```

#### –ë–æ–±—ë—Ä (`_handle_beaver_action`)
```python
# –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –±–æ–±—Ä–∞
self.logger.info(f"üîç _handle_beaver_action: –ü–æ–ª—É—á–µ–Ω callback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}, parts: {parts}")
# ... –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–∏ –∏ —Ñ–∞–∑—ã –∏–≥—Ä—ã
```

### 2. –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–ø—É—Å–∫–∞ —Ö–æ–¥–∞

**–§–∞–π–ª:** `callback_handler.py`
**–°–µ–∫—Ü–∏—è:** –æ–±—Ä–∞–±–æ—Ç–∫–∞ `elif len(parts) >= 2 and parts[1] == "skip"`

```python
# –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
self.logger.info(f"üîç –û–ë–†–ê–ë–û–¢–ö–ê –ü–†–û–ü–£–°–ö–ê –•–û–î–ê: {parts[0]}_skip –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}")

# –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä–æ–∫–∞
player = game.players.get(user_id)
if player:
    self.logger.info(f"üîç –ò–≥—Ä–æ–∫ –Ω–∞–π–¥–µ–Ω: {player.role}, –∂–∏–≤: {player.is_alive}")
else:
    self.logger.error(f"‚ùå –ò–≥—Ä–æ–∫ {user_id} –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∏–≥—Ä–µ {game.chat_id}")
    await query.answer("‚ùå –ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω!", show_alert=True)
    return
```

### 3. –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ NightActions

**–§–∞–π–ª:** `night_actions.py`
**–ú–µ—Ç–æ–¥:** `skip_action`

```python
def skip_action(self, player_id: int) -> bool:
    """–ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –Ω–æ—á–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è –∏–≥—Ä–æ–∫–∞"""
    import logging
    logger = logging.getLogger(__name__)
    
    logger.info(f"üîç skip_action: –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ö–æ–¥ –¥–ª—è –∏–≥—Ä–æ–∫–∞ {player_id}")
    
    player = self.game.players.get(player_id)
    if not player:
        logger.error(f"‚ùå skip_action: –ò–≥—Ä–æ–∫ {player_id} –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∏–≥—Ä–µ")
        return False
    
    if not player.is_alive:
        logger.error(f"‚ùå skip_action: –ò–≥—Ä–æ–∫ {player_id} –Ω–µ –∂–∏–≤")
        return False
    
    logger.info(f"‚úÖ skip_action: –ò–≥—Ä–æ–∫ {player_id} ({player.role}) –Ω–∞–π–¥–µ–Ω –∏ –∂–∏–≤")
    
    # –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–ø—É—Å—Ç–∏–≤—à–∏—Ö
    self.skipped_actions.add(player_id)
    logger.info(f"‚úÖ skip_action: –ò–≥—Ä–æ–∫ {player_id} –¥–æ–±–∞–≤–ª–µ–Ω –≤ skipped_actions")
    
    # –£–¥–∞–ª—è–µ–º –∏–∑ –≤—Å–µ—Ö —Å–ø–∏—Å–∫–æ–≤ —Ü–µ–ª–µ–π (–µ—Å–ª–∏ –±—ã–ª)
    removed_from = []
    if player_id in self.wolf_targets:
        self.wolf_targets.pop(player_id, None)
        removed_from.append("wolf_targets")
    # ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ä–æ–ª–µ–π
    
    if removed_from:
        logger.info(f"‚úÖ skip_action: –ò–≥—Ä–æ–∫ {player_id} —É–¥–∞–ª–µ–Ω –∏–∑: {', '.join(removed_from)}")
    
    logger.info(f"‚úÖ skip_action: –•–æ–¥ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–ø—É—â–µ–Ω –¥–ª—è –∏–≥—Ä–æ–∫–∞ {player_id}")
    return True
```

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. **‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∞
2. **‚úÖ –õ—É—á—à–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –ª–æ–≥–∏ –ø–æ–∫–∞–∂—É—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã, –∏–≥—Ä–æ–∫–∞ –∏ NightActions
3. **‚úÖ –ë–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –æ—à–∏–±–∫–∏** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç —Ç–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–±–ª–µ–º–µ
4. **‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ —Ä–æ–ª–∏ —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º (—Ç–µ–ø–µ—Ä—å –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –≤ –ª–æ–≥–∞—Ö):

1. **‚ùå –ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –∏–≥—Ä–µ
2. **‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–æ–ª—å** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∏–º–µ–µ—Ç –Ω—É–∂–Ω–æ–π —Ä–æ–ª–∏
3. **‚ùå –ù–µ –Ω–æ—á–Ω–∞—è —Ñ–∞–∑–∞** - –∏–≥—Ä–∞ –Ω–µ –≤ –Ω–æ—á–Ω–æ–π —Ñ–∞–∑–µ
4. **‚ùå NightActions –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã** - –ø—Ä–æ–±–ª–µ–º–∞ —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
5. **‚ùå –ò–≥—Ä–æ–∫ –Ω–µ –∂–∏–≤** - –∏–≥—Ä–æ–∫ —É–∂–µ –∏—Å–∫–ª—é—á—ë–Ω –∏–∑ –∏–≥—Ä—ã

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–π –∏–≥—Ä–µ
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤** - —Å–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø—Ä–æ–ø—É—Å–∫–∞ —Ö–æ–¥–∞ –ª—é–±–æ–π —Ä–æ–ª—å—é
3. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è** - –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ —Ä–µ—à–µ–Ω—ã, –ª–æ–≥–∏ –ø–æ–∫–∞–∂—É—Ç —Ç–æ—á–Ω—É—é –ø—Ä–∏—á–∏–Ω—É

## üìä –°—Ç–∞—Ç—É—Å

- **‚úÖ –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã** - –∑–∞–≤–µ—Ä—à—ë–Ω
- **‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã** - –∑–∞–≤–µ—Ä—à–µ–Ω–æ
- **‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–æ** - –∑–∞–≤–µ—Ä—à–µ–Ω–æ
- **‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∑–∞–≤–µ—Ä—à–µ–Ω–æ
- **‚è≥ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –æ–∂–∏–¥–∞–µ—Ç—Å—è

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –Ω–æ—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ —É–ª—É—á—à–µ–Ω–∞. –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É –ª—é–±—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–ø—É—Å–∫–æ–º —Ö–æ–¥–∞.

**–¢–µ–ø–µ—Ä—å –≤—Å–µ —Ä–æ–ª–∏ (–≤–æ–ª–∫, –ª–∏—Å–∞, –∫—Ä–æ—Ç, –±–æ–±—ë—Ä) –∏–º–µ—é—Ç —É–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–ª–∂–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–æ–ø—É—Å–∫ —Ö–æ–¥–∞!**

---
*–û—Ç—á—ë—Ç —Å–æ–∑–¥–∞–Ω: $(date)*
*–°—Ç–∞—Ç—É—Å: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–ù–ï–°–ï–ù–´ –ò –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–´*
