# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ CallbackQuery –≤ Railway

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
```
'CallbackQuery' object has no attribute 'effective_user'
```

**–û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏:**
- "–ó–∞–∫–æ–Ω—á–∏—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ"
- "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–π–º–µ—Ä" 
- "–í—ã–±—Ä–∞—Ç—å –≤–æ–ª–∫–∞"

---

## üîç **–ü—Ä–∏—á–∏–Ω–∞:**
–í —Ñ—É–Ω–∫—Ü–∏—è—Ö `check_game_permissions` –∏ `check_user_permissions` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `update.effective_user`, –Ω–æ –¥–ª—è `CallbackQuery` –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `update.callback_query.from_user`.

---

## ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:**

### 1Ô∏è‚É£ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `check_user_permissions`:**
```python
# –ü–æ–ª—É—á–∞–µ–º user_id –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ update
if update.effective_user:
    user_id = update.effective_user.id
elif update.callback_query and update.callback_query.from_user:
    user_id = update.callback_query.from_user.id
else:
    return False, "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!"

# –ü–æ–ª—É—á–∞–µ–º chat_id –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ update
if update.effective_chat:
    chat_id = update.effective_chat.id
elif update.callback_query and update.callback_query.message:
    chat_id = update.callback_query.message.chat_id
else:
    return False, "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–∞—Ç!"
```

### 2Ô∏è‚É£ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `check_game_permissions`:**
```python
# –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è user_id –∏ chat_id
```

---

## üéØ **–ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û:**

### ‚úÖ **–ö–Ω–æ–ø–∫–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç:**
- ‚úÖ "–ó–∞–∫–æ–Ω—á–∏—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ" - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- ‚úÖ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–π–º–µ—Ä" - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞  
- ‚úÖ "–í—ã–±—Ä–∞—Ç—å –≤–æ–ª–∫–∞" - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
- ‚úÖ –û–±—ã—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (—á–µ—Ä–µ–∑ `update.effective_user`)
- ‚úÖ Callback –∫–Ω–æ–ø–∫–∏ (—á–µ—Ä–µ–∑ `update.callback_query.from_user`)

---

## üöÄ **–î–ï–ü–õ–û–ô –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

### 1Ô∏è‚É£ **–ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã:**
```bash
git add bot.py
git commit -m "Fix CallbackQuery effective_user error"
git push origin main
```

### 2Ô∏è‚É£ **Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç:**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –±–æ—Ç–∞

---

## üéØ **–†–ï–ó–£–õ–¨–¢–ê–¢:**

### ‚úÖ **–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:**
- –ö–Ω–æ–ø–∫–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –±—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —Å–º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏

### ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫–∏ "–ó–∞–∫–æ–Ω—á–∏—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ", "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–π–º–µ—Ä", "–í—ã–±—Ä–∞—Ç—å –≤–æ–ª–∫–∞"
4. –ö–Ω–æ–ø–∫–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫

---

## üéâ **–ì–û–¢–û–í–û!**

**–û—à–∏–±–∫–∞ CallbackQuery –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞! –í—Å–µ –∫–Ω–æ–ø–∫–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!** üöÇüå≤

---
*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ CallbackQuery –≤ Railway*