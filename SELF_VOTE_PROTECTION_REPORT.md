# üõ°Ô∏è –û—Ç—á–µ—Ç –æ –∑–∞—â–∏—Ç–µ –æ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ —Å–µ–±—è

## ‚úÖ –ó–∞—â–∏—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

### üéØ –õ–æ–≥–∏–∫–∞ –∑–∞—â–∏—Ç—ã:

**–ò–≥—Ä–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ —Å–µ–±—è** - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏ –ª–æ–≥–∏—á–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–∞–º–æ—É–±–∏–π—Å—Ç–≤–æ –≤ –∏–≥—Ä–µ.

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:

–í –º–µ—Ç–æ–¥–µ `vote()` –≤ `game_logic.py` (—Å—Ç—Ä–æ–∫–∏ 367-368):

```python
# –ó–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ —Å–µ–±—è
if voter_id == target_id:
    return False, False
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ —Å–µ–±—è (`voter_id == target_id`)
- –ú–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `(False, False)`
- `False` (–ø–µ—Ä–≤—ã–π) = –≥–æ–ª–æ—Å –Ω–µ –ø—Ä–∏–Ω—è—Ç
- `False` (–≤—Ç–æ—Ä–æ–π) = –∏–≥—Ä–æ–∫ –Ω–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª —Ä–∞–Ω–µ–µ
- –ì–æ–ª–æ—Å –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ `self.votes`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—â–∏—Ç—ã:

### –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `test_self_vote_protection.py` —Å 10 —Ç–µ—Å—Ç–∞–º–∏:

1. **`test_cannot_vote_for_self`** - –∏–≥—Ä–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ —Å–µ–±—è
2. **`test_can_vote_for_others`** - –∏–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ –¥—Ä—É–≥–∏—Ö
3. **`test_can_skip_vote`** - –∏–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
4. **`test_multiple_players_cannot_vote_for_self`** - –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫–æ–≤ –Ω–µ –º–æ–≥—É—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ —Å–µ–±—è
5. **`test_mixed_voting_scenario`** - —Å–º–µ—à–∞–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
6. **`test_vote_for_nonexistent_player`** - –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞
7. **`test_vote_for_dead_player`** - –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ –º–µ—Ä—Ç–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞
8. **`test_vote_when_dead`** - –º–µ—Ä—Ç–≤—ã–π –∏–≥—Ä–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å
9. **`test_vote_outside_voting_phase`** - –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –≤–Ω–µ —Ñ–∞–∑—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
10. **`test_complete_voting_with_self_vote_attempts`** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```
–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 10
–ü—Ä–æ–π–¥–µ–Ω–æ: 10 ‚úÖ
–ü—Ä–æ–≤–∞–ª–µ–Ω–æ: 0 ‚ùå
–ü–æ–∫—Ä—ã—Ç–∏–µ: 100%
```

## üéÆ –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã –∑–∞—â–∏—Ç—ã:

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ø—ã—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ —Å–µ–±—è
```python
# Player1 –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ —Å–µ–±—è
success, already_voted = game.vote(1, 1)

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
success = False      # –ì–æ–ª–æ—Å –æ—Ç–∫–ª–æ–Ω–µ–Ω
already_voted = False # –ò–≥—Ä–æ–∫ –Ω–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª —Ä–∞–Ω–µ–µ
# –ì–æ–ª–æ—Å –Ω–µ –∑–∞–ø–∏—Å–∞–Ω –≤ game.votes
```

### –ü—Ä–∏–º–µ—Ä 2: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
```python
# Player1 –≥–æ–ª–æ—Å—É–µ—Ç –∑–∞ Player2
success, already_voted = game.vote(1, 2)

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
success = True       # –ì–æ–ª–æ—Å –ø—Ä–∏–Ω—è—Ç
already_voted = False # –ò–≥—Ä–æ–∫ –Ω–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª —Ä–∞–Ω–µ–µ
# –ì–æ–ª–æ—Å –∑–∞–ø–∏—Å–∞–Ω: game.votes[1] = 2
```

### –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–æ–ø—É—Å–∫ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
```python
# Player1 –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
success, already_voted = game.vote(1, None)

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
success = True       # –ì–æ–ª–æ—Å –ø—Ä–∏–Ω—è—Ç
already_voted = False # –ò–≥—Ä–æ–∫ –Ω–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª —Ä–∞–Ω–µ–µ
# –ì–æ–ª–æ—Å –∑–∞–ø–∏—Å–∞–Ω: game.votes[1] = None
```

## üõ°Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞—â–∏—Ç—ã:

### 1. –ó–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞:
```python
target = self.players.get(target_id)
if not target or not target.is_alive:
    return False, False
```

### 2. –ó–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –º–µ—Ä—Ç–≤—ã–º –∏–≥—Ä–æ–∫–æ–º:
```python
voter = self.players.get(voter_id)
if not voter or not voter.is_alive:
    return False, False
```

### 3. –ó–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –≤–Ω–µ —Ñ–∞–∑—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è:
```python
if self.phase != GamePhase.VOTING:
    return False, False
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∑–∞—â–∏—Ç—ã:

### 1. **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–∞–º–æ—É–±–∏–π—Å—Ç–≤–∞**
- –ò–≥—Ä–æ–∫ –Ω–µ –º–æ–∂–µ—Ç —Å–ª—É—á–∞–π–Ω–æ –∏–ª–∏ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –∏–∑–≥–Ω–∞—Ç—å —Å–µ–±—è
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –±–∞–ª–∞–Ω—Å –∏–≥—Ä—ã

### 2. **–õ–æ–≥–∏—á–Ω–æ—Å—Ç—å**
- –í —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏ –ª—é–¥–∏ –Ω–µ –≥–æ–ª–æ—Å—É—é—Ç –∑–∞ —Å–≤–æ–µ –∏–∑–≥–Ω–∞–Ω–∏–µ
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–≥–∏–∫–µ –∏–≥—Ä—ã

### 3. **–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å**
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —á–µ—Å—Ç–Ω—É—é –∏–≥—Ä—É

### 4. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏ –∏–≥—Ä–æ–∫–æ–≤
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

## üìä –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è:

–ó–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ —Å–µ–±—è **–æ—Ç–ª–∏—á–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è** —Å –Ω–æ–≤–æ–π —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–π –ª–æ–≥–∏–∫–æ–π –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è:

1. **–ò–≥—Ä–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ —Å–µ–±—è** ‚Üí –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–∞–º–æ—É–±–∏–π—Å—Ç–≤–æ
2. **–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞ –∏–∑–≥–Ω–∞–Ω–∏–µ** ‚Üí —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ
3. **–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** ‚Üí –ø–æ–ª–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ:

**–ó–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ —Å–µ–±—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ!**

- ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- ‚úÖ –õ–æ–≥–∏–∫–∞ –∑–∞—â–∏—Ç—ã –ø–æ–Ω—è—Ç–Ω–∞ –∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞
- ‚úÖ 100% –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ–±—â–µ–π –ª–æ–≥–∏–∫–æ–π –∏–≥—Ä—ã
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π

**–≠—Ç–æ –≤–∞–∂–Ω–∞—è –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–ª–∞–µ—Ç –∏–≥—Ä—É –±–æ–ª–µ–µ —á–µ—Å—Ç–Ω–æ–π –∏ –ª–æ–≥–∏—á–Ω–æ–π!** üõ°Ô∏è
