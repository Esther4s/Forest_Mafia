# üîß –û—Ç—á–µ—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤–∞–∂–Ω—ã—Ö –¥–æ—Ä–∞–±–æ—Ç–æ–∫ ForestMafia Bot

## ‚úÖ –í—Å–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!

### üìã –°–ø–∏—Å–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á:

#### 1. ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Ñ–∞–∑–∞–º–∏**
- **–°—Ç–∞—Ç—É—Å**: –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- **–î–µ—Ç–∞–ª–∏**: –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Ñ–∞–∑–∞–º–∏ (–Ω–æ—á—å ‚Üí –¥–µ–Ω—å ‚Üí –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ ‚Üí –Ω–æ—á—å) —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Ñ–∞–∑–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

#### 2. ‚úÖ **–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —ç—Ç–∞–ø–æ–≤**
- **–°—Ç–∞—Ç—É—Å**: –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–î–µ—Ç–∞–ª–∏**: –ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π —ç—Ç–∞–ø –∑–∞–∫—Ä–µ–ø–ª—è–µ—Ç—Å—è —Å –æ—Ç–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–∏—Å—Ç–µ–º–∞ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### 3. ‚úÖ **–¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–≥—Ä—ã**
- **–°—Ç–∞—Ç—É—Å**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–î–µ—Ç–∞–ª–∏**: –ü—Ä–∏ –Ω–∞—á–∞–ª–µ –∏–≥—Ä—ã –≤—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —Ç–µ–≥–∏ —Å –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ–º
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `tag_game_participants()` —Å –∫—Ä–∞—Å–∏–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º

#### 4. ‚úÖ **–ó–∞–º–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å—Ç–∏–ª–µ –ª–µ—Å–Ω—ã—Ö –∑–≤–µ—Ä–µ–π**
- **–°—Ç–∞—Ç—É—Å**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–î–µ—Ç–∞–ª–∏**: –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–∏ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–µ—Ä–µ–ø–∏—Å–∞–Ω—ã –≤ –ª–µ—Å–Ω–æ–º —Å—Ç–∏–ª–µ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: 
  - –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ: "üå≤ –í—Ä–µ–º—è —Ä–µ—à–∞—Ç—å —Å—É–¥—å–±—É –ª–µ—Å–∞!"
  - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã: "üå≤ {–∏–≥—Ä–æ–∫} –ø–æ–∫–∏–¥–∞–µ—Ç –ª–µ—Å –Ω–∞–≤—Å–µ–≥–¥–∞..."
  - –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ –≤–æ–ª–∫–∞: "üê∫ –ö—Ç–æ –∂–µ —Å—Ä–µ–¥–∏ –Ω–∞—Å –≤–æ–ª–∫?"

#### 5. ‚úÖ **–§–∏–∫—Å—ã –∫–Ω–æ–ø–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∞–π–º–µ—Ä–∞**
- **–°—Ç–∞—Ç—É—Å**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–î–µ—Ç–∞–ª–∏**: 
  - –ö–Ω–æ–ø–∫–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Ç–∞–π–º–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ó–∞–∫—Ä—ã—Ç—å" –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ —á–µ—Ä–µ–∑ `check_game_permissions()`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–Ω–æ–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —Å –∫–Ω–æ–ø–∫–æ–π –∑–∞–∫—Ä—ã—Ç–∏—è

#### 6. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î**
- **–°—Ç–∞—Ç—É—Å**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–î–µ—Ç–∞–ª–∏**: 
  - –°–æ–∑–¥–∞–Ω–∞ –º–æ–¥–µ–ª—å `BotSettings` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
  - –î–æ–±–∞–≤–ª–µ–Ω `BotSettingsService` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
  - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `DatabaseAdapter`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

#### 7. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–ª—è –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫**
- **–°—Ç–∞—Ç—É—Å**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–î–µ—Ç–∞–ª–∏**: 
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ" –∏ "–í—ã–±—Ä–∞—Ç—å –≤–æ–ª–∫–∞"
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `check_game_permissions()` —Å –∞–ª–µ—Ä—Ç–∞–º–∏
  - –ó–∞–º–µ–Ω–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –∞–ª–µ—Ä—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –ø—Ä–∞–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –∑–∞—â–∏—â–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤

## üéØ –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üå≤ **–õ–µ—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**
```python
# –°—Ç–∞—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
"üó≥Ô∏è –í—Ä–µ–º—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ –∏–∑–≥–Ω–∞–Ω–∏–µ!"

# –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
"üå≤ –í—Ä–µ–º—è —Ä–µ—à–∞—Ç—å —Å—É–¥—å–±—É –ª–µ—Å–∞!\nü¶å –ö–æ–≥–æ –∏–∑ –æ–±–∏—Ç–∞—Ç–µ–ª–µ–π –ª–µ—Å–∞ –≤—ã —Å—á–∏—Ç–∞–µ—Ç–µ –æ–ø–∞—Å–Ω—ã–º?"
```

### üë• **–¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤**
```python
async def tag_game_participants(self, update, context, game):
    """–¢–µ–≥–∏—Ä—É–µ—Ç –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–≥—Ä—ã —Å –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ–º –æ –Ω–∞—á–∞–ª–µ"""
    player_tags = []
    for player in game.players:
        if player.username:
            player_tags.append(f"@{player.username}")
        else:
            player_tags.append(f"[{player.first_name}](tg://user?id={player.user_id})")
    
    tag_message = (
        "üéÆ **–ò–≥—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è!** üéÆ\n\n"
        "üå≤ –í—Å–µ –∑–≤–µ—Ä—É—à–∫–∏ —Å–æ–±—Ä–∞–ª–∏—Å—å –≤ –ª–µ—Å—É –¥–ª—è –∏–≥—Ä—ã –≤ –õ–µ—Å –∏ –í–æ–ª–∫–∏!\n\n"
        f"üë• **–£—á–∞—Å—Ç–Ω–∏–∫–∏ –∏–≥—Ä—ã:** {', '.join(player_tags)}\n\n"
        "üé≠ –†–æ–ª–∏ —É–∂–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –±–æ—Ç–æ–º.\n"
        "üåô –°–∫–æ—Ä–æ –Ω–∞—Å—Ç—É–ø–∏—Ç –ø–µ—Ä–≤–∞—è –Ω–æ—á—å..."
    )
```

### üîí **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤**
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
has_permission, error_msg = await self.check_game_permissions(query, context, "day_end_discussion")
if not has_permission:
    await query.answer(error_msg, show_alert=True)
    return
```

### üóÑÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ë–î**
```python
class BotSettings(Base):
    """–ú–æ–¥–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞"""
    __tablename__ = 'bot_settings'
    
    id = Column(String, primary_key=True, default=lambda: str(uuid.uuid4()))
    chat_id = Column(Integer, nullable=False, index=True)
    thread_id = Column(Integer, nullable=True)
    setting_key = Column(String, nullable=False)
    setting_value = Column(Text, nullable=False)
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
```

## üöÄ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É**

### ‚úÖ **–í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:**
- [x] –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Ñ–∞–∑–∞–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [x] –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- [x] –õ–µ—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [x] –ö–Ω–æ–ø–∫–∏ —Ç–∞–π–º–µ—Ä–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å –ë–î
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∞

### üéÆ **–£–ª—É—á—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞:**
- **–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞**: –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –≤ —Å—Ç–∏–ª–µ –ª–µ—Å–Ω—ã—Ö –∑–≤–µ—Ä–µ–π
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —Ç–µ–≥–∏ –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –∏–≥—Ä—ã
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã –ø—Ä–∞–≤–∞–º–∏
- **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- **–£–¥–æ–±—Å—Ç–≤–æ**: –ö–Ω–æ–ø–∫–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç–∏—è

### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `bot_settings` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–ª—è –≤—Å–µ—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- **–ö–æ–¥**: –£–ª—É—á—à–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

## üéâ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

**–í—Å–µ –≤–∞–∂–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!** 

–ë–æ—Ç —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç:
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Ñ–∞–∑–∞–º–∏
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–µ –ª–µ—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- ‚úÖ –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

**–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É —Å –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º —É–ª—É—á—à–µ–Ω–∏–π!** üöÄ

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤–∞–∂–Ω—ã—Ö –¥–æ—Ä–∞–±–æ—Ç–æ–∫*
