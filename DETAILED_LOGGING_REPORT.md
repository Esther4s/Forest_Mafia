# üîç –î–ï–¢–ê–õ–¨–ù–û–ï –õ–û–ì–ò–†–û–í–ê–ù–ò–ï: –ö–Ω–æ–ø–∫–∏ "–ú–∞–≥–∞–∑–∏–Ω" –∏ "–ö–æ—Ä–∑–∏–Ω–∫–∞"

## üîç –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ –≤ –≤–µ—Ç–∫–µ —Å –ª–µ—Å–∞–º–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–Ω–æ–ø–∫–∏ "üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω" –∏ "üß∫ –ö–æ—Ä–∑–∏–Ω–∫–∞" –≤ —Å—Ç–∞—Ä—Ç–æ–≤–æ–º –º–µ–Ω—é. –¢—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º—ã.

## üîß –î–æ–±–∞–≤–ª–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ callback_handler.py

#### –í –º–µ—Ç–æ–¥–µ `handle_callback`:
```python
# –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥—è—â–∏—Ö callback'–æ–≤
user_id = query.from_user.id if query.from_user else "unknown"
self.logger.info(f"üîç handle_callback: –ü–æ–ª—É—á–µ–Ω callback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}, data: '{callback_data}'")

# –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
self.logger.info(f"üîç handle_callback: main_handler = '{main_handler}', parts = {parts}")
self.logger.info(f"üîç handle_callback: –ü–æ–∏—Å–∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–ª—è '{main_handler}': {'–Ω–∞–π–¥–µ–Ω' if handler_func else '–Ω–µ –Ω–∞–π–¥–µ–Ω'}")

# –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ
self.logger.warning(f"‚ö†Ô∏è handle_callback: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è '{main_handler}' –Ω–µ –Ω–∞–π–¥–µ–Ω, –¥–æ—Å—Ç—É–ø–Ω—ã–µ: {list(self.callback_handlers.keys())}")
```

#### –í –º–µ—Ç–æ–¥–µ `_handle_shop_menu`:
```python
self.logger.info(f"üõçÔ∏è _handle_shop_menu: –ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}, parts: {parts}")
```

#### –í –º–µ—Ç–æ–¥–µ `_handle_inventory_menu`:
```python
self.logger.info(f"üß∫ _handle_inventory_menu: –ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}, parts: {parts}")
```

### 2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ bot.py

#### –í –º–µ—Ç–æ–¥–µ `handle_welcome_buttons`:
```python
# –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥—è—â–∏—Ö callback'–æ–≤
user_id = query.from_user.id if query.from_user else "unknown"
logger.info(f"üîç handle_welcome_buttons: –ü–æ–ª—É—á–µ–Ω callback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}, data: '{query.data}'")

# –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ shop_menu
logger.info(f"üõçÔ∏è handle_welcome_buttons: –û–±—Ä–∞–±–æ—Ç–∫–∞ shop_menu –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}")

# –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ inventory_menu
logger.info(f"üß∫ handle_welcome_buttons: –û–±—Ä–∞–±–æ—Ç–∫–∞ inventory_menu –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}")
```

#### –í –º–µ—Ç–æ–¥–µ `show_shop_menu`:
```python
logger.info(f"üõçÔ∏è show_shop_menu: –ù–∞—á–∞–ª–æ –ø–æ–∫–∞–∑–∞ –º–∞–≥–∞–∑–∏–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id} ({username})")
```

#### –í –º–µ—Ç–æ–¥–µ `show_inventory`:
```python
logger.info(f"üß∫ show_inventory: –ù–∞—á–∞–ª–æ –ø–æ–∫–∞–∑–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id} ({username})")
```

## üéØ –ß—Ç–æ –ø–æ–∫–∞–∂–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ **–î–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º:**
1. **–í—Ö–æ–¥—è—â–∏–µ callback'—ã** - –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–ü–æ–∏—Å–∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤** - –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –Ω—É–∂–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
3. **–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏** - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
4. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤** - –¥–æ—Ö–æ–¥—è—Ç –ª–∏ –≤—ã–∑–æ–≤—ã –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
5. **–ü—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - –µ—Å—Ç—å –ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

### üîç **–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
```
üîç handle_callback: –ü–æ–ª—É—á–µ–Ω callback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 12345, data: 'shop_menu'
üîç handle_callback: main_handler = 'shop', parts = ['shop', 'menu']
üîç handle_callback: –ü–æ–∏—Å–∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–ª—è 'shop': –Ω–µ –Ω–∞–π–¥–µ–Ω
‚ö†Ô∏è handle_callback: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è 'shop' –Ω–µ –Ω–∞–π–¥–µ–Ω, –¥–æ—Å—Ç—É–ø–Ω—ã–µ: ['view_my_role', 'repeat_current_phase', ...]
```

## üöÄ –°—Ç–∞—Ç—É—Å
‚úÖ **–õ–û–ì–ò–†–û–í–ê–ù–ò–ï –î–û–ë–ê–í–õ–ï–ù–û** - –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–Ω–æ–ø–∫–∞–º–∏!

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤–æ –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Ç–æ—á–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ callback'–æ–≤
- –í–∫–ª—é—á–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ –º–∞–≥–∞–∑–∏–Ω–∞ –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –∫–Ω–æ–ø–æ–∫
