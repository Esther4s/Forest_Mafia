# –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: Docker —Å–±–æ—Ä–∫–∞

## üê≥ –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ Docker –æ–±—Ä–∞–∑–∞:
```
ERROR: failed to build: failed to solve: python:3.11-slim: failed to resolve source metadata for docker.io/library/python:3.11-slim: failed to authorize: failed to fetch oauth token: unexpected status from POST request to https://auth.docker.io/token: 500 Internal Server Error
```

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω –æ—Å–Ω–æ–≤–Ω–æ–π Dockerfile
**–§–∞–π–ª**: `Dockerfile`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –ó–∞–º–µ–Ω–µ–Ω `python:3.11-slim` –Ω–∞ `python:3.11-alpine` (–±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π)
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã –¥–ª—è Alpine Linux (`apk` –≤–º–µ—Å—Ç–æ `apt-get`)
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è PostgreSQL
- –£–ª—É—á—à–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

```dockerfile
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ Python
FROM python:3.11-alpine

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è Alpine
RUN apk add --no-cache \
    gcc \
    musl-dev \
    libffi-dev \
    postgresql-dev \
    && rm -rf /var/cache/apk/*
```

### 2. –°–æ–∑–¥–∞–Ω –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π Dockerfile
**–§–∞–π–ª**: `Dockerfile.ubuntu`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å Ubuntu 22.04
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Ubuntu 22.04 –∫–∞–∫ –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Python 3 –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- –í–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### 3. –°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏ —Å retry –ª–æ–≥–∏–∫–æ–π
**–§–∞–π–ª—ã**: `build_docker.sh` (Linux/Mac), `build_docker.ps1` (Windows)
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å–±–æ—Ä–∫–∏ (3 –ø–æ–ø—ã—Ç–∫–∏)
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π Dockerfile –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞**: Alpine –æ–±—Ä–∞–∑ –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª–µ–Ω —á–µ–º slim
- ‚úÖ **–†–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç**: Ubuntu Dockerfile –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –ø–ª–∞–Ω
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –°–∫—Ä–∏–ø—Ç—ã —Å retry –ª–æ–≥–∏–∫–æ–π
- ‚úÖ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å**: –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è Linux/Mac –∏ Windows

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### Linux/Mac:
```bash
./build_docker.sh
```

### Windows PowerShell:
```powershell
.\build_docker.ps1
```

### –†—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞:
```bash
# –û—Å–Ω–æ–≤–Ω–æ–π (Alpine)
docker build -t forest-mafia-bot .

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π (Ubuntu)
docker build -f Dockerfile.ubuntu -t forest-mafia-bot .
```

## üéØ –°—Ç–∞—Ç—É—Å
‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - Docker —Å–±–æ—Ä–∫–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–æ–≤—ã–º Alpine –æ–±—Ä–∞–∑–æ–º –∏ retry –ª–æ–≥–∏–∫–æ–π
