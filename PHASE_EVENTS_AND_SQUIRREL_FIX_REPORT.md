# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π —ç—Ç–∞–ø–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–ª–æ—á–∫–∏

## ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´:**

### 1Ô∏è‚É£ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ —Å bot –≤ —Ç–∞–π–º–µ—Ä–∞—Ö:**
- ‚úÖ –£–±—Ä–∞–Ω—ã `update` –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —Ç–∞–π–º–µ—Ä–æ–≤
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—ã–∑–æ–≤—ã `process_night_phase`, `start_day_phase`, `start_voting_phase`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ `update` –æ–±—ä–µ–∫—Ç—ã –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã `update.message.reply_text` –Ω–∞ `context.bot.send_message`

### 2Ô∏è‚É£ **–î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–∑ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–∑—ã "night" –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –Ω–æ—á–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–∑—ã "day" –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –¥–Ω—è
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–∑—ã "voting" –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `update_game_phase` –≤ DatabaseAdapter

### 3Ô∏è‚É£ **–î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–µ–ª–æ—á–∫–∏ –¥–ª—è —É–º–µ—Ä—à–∏—Ö –∏–≥—Ä–æ–∫–æ–≤:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `send_squirrel_message` –≤ bot.py
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_send_squirrel_messages` –≤ night_interface.py
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–ª–æ—á–∫–∏ –ø–æ—Å–ª–µ –Ω–æ—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –ö—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª–µ—Å–Ω–æ–º —Å—Ç–∏–ª–µ —Å —Ä–æ–ª—å—é –∏–≥—Ä–æ–∫–∞

---

## üîç **–î–ï–¢–ê–õ–ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô:**

### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å bot:**
```python
# –†–∞–Ω—å—à–µ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
async def night_phase_timer(self, update: Update, context: ContextTypes.DEFAULT_TYPE, game: Game):
    await self.start_day_phase(update, context, game)

# –¢–µ–ø–µ—Ä—å (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
async def night_phase_timer(self, context: ContextTypes.DEFAULT_TYPE, game: Game):
    await self.start_day_phase(context, game)
```

### **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–∑ –≤ –ë–î:**
```python
# –ü—Ä–∏ –Ω–∞—á–∞–ª–µ –Ω–æ—á–∏:
game.start_night()
if hasattr(game, 'db_game_id') and game.db_game_id:
    self.db.update_game_phase(game.db_game_id, "night")

# –ü—Ä–∏ –Ω–∞—á–∞–ª–µ –¥–Ω—è:
game.start_day()
if hasattr(game, 'db_game_id') and game.db_game_id:
    self.db.update_game_phase(game.db_game_id, "day")

# –ü—Ä–∏ –Ω–∞—á–∞–ª–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è:
game.start_voting()
if hasattr(game, 'db_game_id') and game.db_game_id:
    self.db.update_game_phase(game.db_game_id, "voting")
```

### **–°–æ–æ–±—â–µ–Ω–∏–µ –±–µ–ª–æ—á–∫–∏:**
```python
squirrel_message = (
    f"üçÇ –û—Å–µ–Ω–Ω–∏–π –ª–∏—Å—Ç —É–ø–∞–ª üçÇ\n\n"
    f"üêøÔ∏è –ú–∞–ª–µ–Ω—å–∫–∞—è –±–µ–ª–æ—á–∫–∞ —Å –ø–µ—á–∞–ª—å–Ω—ã–º–∏ –≥–ª–∞–∑–∫–∞–º–∏ –ø–æ–¥–æ—à–ª–∞ –∫ —Ç–µ–±–µ, {player_name}...\n\n"
    f"üí≠ \"–õ–µ—Å –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —Ç–≤–æ–∏—Ö —É—Å–ª—É–≥–∞—Ö, {player_name},\" - –≥–æ–≤–æ—Ä–∏—Ç –æ–Ω–∞.\n"
    f"üåÖ \"–°–æ–ª–Ω—Ü–µ –∑–∞—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–µ–±—è –≤ —ç—Ç–æ–º –º–∏—Ä–µ.\"\n\n"
    f"üé≠ –¢–≤–æ—è —Ä–æ–ª—å: {role_name}\n"
    f"üö´ –¢–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è –≤ –∏–≥—Ä–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ã.\n"
    f"üîá –ú–æ–ª—á–∞–Ω–∏–µ - —Ç–≤–æ—è –Ω–æ–≤–∞—è –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç—å.\n\n"
    f"üåå –ë–µ–ª–æ—á–∫–∞ –±–µ—Ä–µ–∂–Ω–æ –∑–∞–±–∏—Ä–∞–µ—Ç —Ç–≤–æ—é –¥—É—à—É, —á—Ç–æ–±—ã –æ—Ç–Ω–µ—Å—Ç–∏ –µ—ë –≤ –∑–≤—ë–∑–¥–Ω—ã–π –ª–µ—Å...\n\n"
    f"‚≠êÔ∏è –î–æ —Å–≤–∏–¥–∞–Ω–∏—è, {player_name} ‚≠êÔ∏è"
)
```

---

## üéØ **–†–ï–ó–£–õ–¨–¢–ê–¢:**

### ‚úÖ **–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:**
- **–¢–∞–π–º–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç** –±–µ–∑ –æ—à–∏–±–æ–∫ —Å bot
- **–§–∞–∑—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–º–µ–Ω–µ
- **–°–æ–æ–±—â–µ–Ω–∏–µ –±–µ–ª–æ—á–∫–∏** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–º–µ—Ä—à–∏–º –∏–≥—Ä–æ–∫–∞–º
- **–í—Å–µ —ç—Ç–∞–ø—ã –∏–≥—Ä—ã** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

### ‚úÖ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ù–æ—á–Ω–æ–π —Ç–∞–π–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –¥–Ω–µ–≤–Ω–æ–π —Ñ–∞–∑–µ
- –î–Ω–µ–≤–Ω–æ–π —Ç–∞–π–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—é
- –£–º–µ—Ä—à–∏–µ –∏–≥—Ä–æ–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –∫—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–µ–ª–æ—á–∫–∏
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–∑ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ PostgreSQL

---

## üöÄ **–î–ï–ü–õ–û–ô:**

### 1Ô∏è‚É£ **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã –∫ –¥–µ–ø–ª–æ—é:**
- –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã –≤ –∫–æ–¥
- –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- –ì–æ—Ç–æ–≤–æ –∫ –∫–æ–º–º–∏—Ç—É –∏ –ø—É—à—É

### 2Ô∏è‚É£ **–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:**
- Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –±–æ—Ç–∞
- –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å—Ç—É–ø—è—Ç –≤ —Å–∏–ª—É
- –ò–≥—Ä–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ

---

## üéâ **–ì–û–¢–û–í–û!**

**–°–æ–±—ã—Ç–∏—è —ç—Ç–∞–ø–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, —Å–æ–æ–±—â–µ–Ω–∏–µ –±–µ–ª–æ—á–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–æ!** üöÇüå≤

**–¢–µ–ø–µ—Ä—å –∏–≥—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö!** ‚úÖ

---
*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π —ç—Ç–∞–ø–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–ª–æ—á–∫–∏*
